<!doctype html>
<html lang='en'>
<head>
	<title>Chat</title>
	<link rel='stylesheet' href='/stylesheets/style.css'></link>
	<link rel='stylesheet' href='/stylesheets/tabula.css'></link>
	<script src='/javascripts/vendors/firebase/firebase.js' type='text/javascript'></script>
	<script src='/javascripts/vendors/tabula/tabula.js' type='text/javascript'></script>
</head>
<body>
	<h3>Two factor auth test</h3>
	<br />
	<hr />
	<br />
	<div id='test-content'>
		<div id="steps"><div>

			<button id="open-socket">open socket</button>
			<br/>
			<br/>
			<form id='phone-form'>
				<div>enter phone</div>
				<input id='phone-number' />
				<input id='phone-button' type='submit' value='Request pin to validate'/>
			</form>
			<br/>
			<form id='pin-form'>
				<div>enter PIN</small></div>
				<input id='pin-number' />
				<input id='pin-button' type='submit' value='confirn with PIN'/>
			</form>
			<br/>
			<form id='name-form'>
				<div>enter name</small></div>
				<input id='name-text' disabled />
				<input id='name-button' type='submit' value='Submit Name' disabled/>
			</form>
			<br/>
			<h2 id="user-name"></h2>
			<br/>
			<button id="fb-authenticate" disabled>authenticate with FB</button><br/><small>only if we have user account</small>

		</div></div>
		<div id="status">
			<div id="tabula" class="tabula"></div>
		</div>
	</div>

	<div id='help'>
		User flow:
		<ul>
			<li>First open the socket</li>
			<li>enter mobile nuber in format (country code operator prefix number): <code>+CcOp1234567</code></li>
			<li>backend validates the number and sends PIN over SMS, enter the pin <code>1234</code></li>
			<li>if the user already has this number we get the name and send JWT to authenticate with firebase</li>
			<li>otherwise we ask for the name</li>
			<li>New user is registered and JWT is sent to him</li>
		</ul>
	</div>

<script src='/socket.io/socket.io.js' type='text/javascript'></script>
<script src='http://code.jquery.com/jquery-2.1.0.min.js' type='text/javascript'></script>
<script src='/javascripts/app/auth.js' type='text/javascript'></script>
<script src='/javascripts/app/auth_ui.js' type='text/javascript'></script>
</body>
</html>
